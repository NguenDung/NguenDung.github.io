<footer class="site-footer">
  <div class="wrapper">
    <div class="credits">
      <a href="https://github.com/bitbrain/jekyll-dash">dash</a> theme for Jekyll by 
      <a href="https://github.com/bitbrain">bitbrain</a> made with <i class="fas fa-heart"></i>
      {%- include theme-toggle.html -%}
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const overlay = document.getElementById('welcome-overlay');
  const modal   = document.getElementById('welcome-modal');
  const closeBtn= document.getElementById('welcome-close');
  const audio   = document.getElementById('welcome-audio');
  const pc      = modal.querySelector('.particle-container');

  function showModal() {
    overlay.style.display = 'block';
    modal.style.display   = 'block';
    audio.play();
  }
  function hideModal() {
    overlay.style.display = 'none';
    modal.style.display   = 'none';
    audio.pause();
  }

  // Mở ngay khi load
  showModal();

  // Đóng bằng nút X
  closeBtn.addEventListener('click', hideModal);
  // Đóng khi click ngoài modal (trên overlay)
  overlay.addEventListener('click', hideModal);
  // Đóng khi nhấn Esc
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') hideModal();
  });

  // Sinh particle (ngôi sao/trái tim) xen kẽ
  let count = 0, max = 20;
  const createParticle = () => {
    if (count++ >= max) return;
    const p = document.createElement('div');
    p.classList.add('particle');
    // 50% heart, 50% star
    if (Math.random() < 0.5) {
      p.style.backgroundImage = "url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"%23e25555\" viewBox=\"0 0 24 24\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>')";
    }
    // Đặt tại giữa card
    p.style.left = 'calc(50% - 4px)';
    p.style.top  = 'calc(50% - 4px)';
    // Hướng ngẫu nhiên
    const angle = Math.random() * 2 * Math.PI;
    const dist  = 100 + Math.random() * 100;
    p.style.setProperty('--dx', (Math.cos(angle) * dist) + 'px');
    p.style.setProperty('--dy', (Math.sin(angle) * dist) + 'px');
    pc.appendChild(p);
    setTimeout(() => pc.removeChild(p), 2000);
  };
  const interval = setInterval(createParticle, 300);
  setTimeout(() => clearInterval(interval), 6000);
});
</script>
