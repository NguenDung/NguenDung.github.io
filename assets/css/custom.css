/* ====== CẤU HÌNH NHANH ====== */
:root {
  --player-w: 455px;
  --player-h: 520px;
  --player-right: 2rem;
  --stack-gap: 0rem;
  --wrapper-left: 2rem;
  --gap: 1.2rem;
}
html, body { overflow-x: clip; }

/* ====== NỀN ====== */
body {
  background: url("../images/background.jpg") no-repeat center/cover fixed;
}

/* ====== LAYOUT CHUNG ====== */
.page-content { display: flex; justify-content: flex-start; }

/* ====== KHUNG BLOG (OVERLAY) ====== */
.page-content .wrapper {
  width: calc(100vw - var(--player-w) - var(--player-right) - var(--wrapper-left));
  max-width: none !important;
  margin: 2rem var(--gap) 2rem var(--wrapper-left);
  background: rgba(0,0,0,0.98);
  padding: 2.5rem;
  border-radius: 1.2rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.8);
  overflow: hidden;
  box-sizing: border-box;
  font-size: 1.08rem;
  line-height: 1.7;
}
.page-content .wrapper .wrapper,
.page-content .wrapper .site-header .wrapper,
.page-content .wrapper .site-footer .wrapper,
.page-content .wrapper .page-header .wrapper,
.page-content .wrapper .dash-header .wrapper {
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box;
}
.page-content .wrapper .site-header,
.page-content .wrapper .page-header,
.page-content .wrapper .dash-header,
.page-content .wrapper .site-footer {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* ====== TYPO & TAGS TRONG KHUNG BLOG ====== */
.page-content .wrapper h1 { font-size: 2.2rem; }
.page-content .wrapper h2 { font-size: 1.6rem; letter-spacing: 0.2px; margin-bottom: 1rem; }
.page-content .wrapper h3 { font-size: 1.25rem; }
.page-content .wrapper .tag,
.page-content .wrapper .post-tag,
.page-content .wrapper .label {
  font-size: 0.92rem;
  padding: 0.25rem 0.6rem;
  border-radius: 0.6rem;
}
.page-content .wrapper .post-meta,
.page-content .wrapper .post__meta {
  font-size: 0.95rem;
}

/* ====== AVATAR + GIỚI THIỆU Ở HEADER ====== */
.page-content .wrapper header img,
.page-content .wrapper .site-header img,
.page-content .wrapper .dash-header img {
  width: 72px; height: 72px; object-fit: cover; border-radius: 12px; margin-right: 12px;
}
.page-content .wrapper header p,
.page-content .wrapper .site-header p,
.page-content .wrapper .dash-header p {
  font-size: 1.02em;
}

/* ====== SPOTIFY (CARD VIEW) ====== */
#spotify-player-wrapper {
  position: fixed;
  bottom: 2rem;
  right: var(--player-right);
  width: var(--player-w);
  height: var(--player-h);
  background: rgba(0,0,0,0.7);
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: 1rem;
  border-bottom-right-radius: 1rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.6);
  overflow: hidden;
  z-index: 1000;
}
#spotify-player-wrapper iframe { width: 100%; height: 100%; border: none; }

/* ====== THANH LỊCH (NẰM TRÊN SPOTIFY) ====== */
#schedule-bar {
  position: fixed !important;
  right: var(--player-right);
  bottom: calc(2rem + var(--player-h) + var(--stack-gap));
  width: var(--player-w);
  height: 230px;
  background: rgba(0,0,0,0.85);
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  box-shadow: 0 6px 16px rgba(0,0,0,0.6);
  overflow: hidden;
  z-index: 1000;
}
#schedule-bar iframe { width: 100%; height: 100%; border: 0; }

/* ====== MOBILE ====== */
@media (max-width: 600px) {
  #spotify-player-wrapper, #schedule-bar { display: none; }
  .page-content .wrapper { width: 100%; margin: 1rem; max-width: none; }
}

/* Hiệu ứng mượt khi Swup thay nội dung */
.transition-fade { transition: opacity .2s ease; }
html.is-changing .transition-fade { opacity: 0; }

/* ===== WARNING MODAL (final, responsive) ===== */
#warning-modal {
  position: fixed; inset: 0;
  display: none;
  align-items: center; justify-content: center;
  background: rgba(0,0,0,0.66);
  z-index: 1300;
  backdrop-filter: blur(2px);
}
#warning-modal img { display: block; max-width: none; max-height: none; }
#warning-modal.soft {
  background: rgba(0,0,0,0.66);
  padding-inline: 3vw;
  padding-top: max(1.5vh, env(safe-area-inset-top));
  padding-bottom: max(1.5vh, env(safe-area-inset-bottom));
}
#warning-modal.soft img {
  height: 94vh; width: auto;
  object-fit: contain;
  border-radius: 18px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}
#warning-modal.hard {
  background: rgba(0,0,0,0.9); padding: 0;
  display: flex; align-items: center; justify-content: center;
}
#warning-modal.hard img {
  width: 96vmin; height: auto;
  max-width: 96vw; max-height: 96vh;
  object-fit: contain; border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}
@media (orientation: portrait) {
  #warning-modal.hard {
    padding: env(safe-area-inset-top) env(safe-area-inset-right)
             env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
  #warning-modal.hard img {
    width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
}
@media (max-height: 520px) { #warning-modal.soft img { height: 88vh; } }
body.warn-lock {
  overflow: hidden !important;
  cursor: not-allowed !important;
  user-select: none !important;
}

/* === TÙY CHỈNH CHO SEARCH BOX === */
.recent-articles .recent-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-right: 2rem;
}
.recent-articles .recent-header h2 {
  margin: 0;
  font-size: 2rem;
  color: #4e8cff;
}
#article-search {
  width: clamp(350px, 60%, 800px);
  padding: 0.6rem 1rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 0.5rem;
  background-color: #f5f5f5;
  color: #4e8cff;
  transition: border-color .2s, box-shadow .2s;
}
#article-search::placeholder { color: #a0a0a0; }
#article-search:focus {
  outline: none;
  border-color: #4e8cff;
  box-shadow: 0 0 0 3px rgba(78, 140, 255, 0.3);
}
.article-item.hidden {
  opacity: 0; height: 0; margin: 0; padding: 0; overflow: hidden;
  transition: opacity .3s, height .3s;
}

/* ===== WELCOME MODAL: Opacity mượt, không nhấp nháy ===== */
#welcome-overlay, #welcome-modal {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s cubic-bezier(.4,0,.2,1);
  display: none;
}
#welcome-overlay.active {
  opacity: 1;
  pointer-events: auto;
  display: block;
}
#welcome-modal.active {
  opacity: 1;
  pointer-events: auto;
  display: flex;
}
#welcome-modal {
  /* KHÔNG CẦN display: flex ở đây nữa! */
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  width: 90vw; max-width: 600px; padding: 3rem;
  background: rgba(0,0,0,.95);
  border-radius: 1rem;
  box-shadow: 0 8px 30px rgba(0,0,0,.8);
  z-index: 2000;
  flex-direction: column; align-items: center; gap: 1.5rem;
}
#welcome-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.6); z-index: 1999;
}

/* Các rule cũ như .welcome-card, .welcome-avatar giữ nguyên */

.modal-open { overflow: hidden }
.welcome-card { display: flex; flex-direction: column; align-items: center; text-align: center; position: relative }
.welcome-avatar { width: 160px; height: 160px; border-radius: 50%; object-fit: cover }
.welcome-card h1 { font-size: 3rem; margin: 0 }
.welcome-card p { font-size: 1.3rem; margin: .5rem 0; line-height: 1.4; }
.welcome-links {
  display: grid; grid-template-columns: repeat(3,1fr);
  gap: .75rem 1.5rem; list-style: none; padding: 0; margin: 1.5rem 0 0;
}
.welcome-links a {
  display: inline-flex; align-items: center; gap: .5rem;
  font-size: 1.2rem;
  color: #4e8cff !important;
  fill: currentColor;
  text-decoration: none;
  transition: color 0.15s;
}
.welcome-links a:hover {
  color: #75aaff !important;
  fill: #75aaff;
  text-decoration: underline
}
/* SVG icon căn giữa + kích thước đồng bộ */
.svg-icon {
  display: inline-flex;
  vertical-align: middle;
  margin-right: 0.4em;
  width: 1.2em;
  height: 1.2em;
}
.svg-icon svg { width: 1.2em; height: 1.2em; display: block; }
.threads-icon svg, .tiktok-icon svg { filter: drop-shadow(0 0 2px #fff); }

/* Nút đóng */
#welcome-close {
  position: absolute; top: .5rem; right: .75rem;
  background: none; border: none; font-size: 2.4rem; color: #ccc; cursor: pointer
}
#welcome-close:hover { color: #fff }

/* nút About Me (pill giống social icons) */
.about-btn {
  font-family: inherit;
  font-size: 1rem;
  font-weight: 500;
  color: inherit;
  background: rgba(255,255,255,0.17);
  border: none;
  border-radius: 0.7rem;           /* Phình bo góc thêm chút */
  padding: 0.28em 1.1em;           /* Cao hơn xíu (0.28em), ngang giữ lại sự cân đối */
  margin-left: 1rem;
  cursor: pointer;
  transition: background 0.18s, color 0.18s;
  line-height: 1.13;
  box-shadow: none;
  letter-spacing: 0.01em;
  display: inline-block;
  vertical-align: middle;
}

.about-btn:hover,
.about-btn:focus {
  background: rgba(255,255,255,0.28);
  color: inherit;
  text-decoration: none;
}


/* Fix social icon màu khi hover không bị chuyển hồng */
.social_links a,
.social_links a:visited,
.social_links a:active {
  color: #fff !important;
  background: none !important;
  transition: color 0.17s;
}
.social_links a:hover {
  color: #4e8cff !important;
}
