/* =========================================================
   CUSTOM.CSS — CLEAN & CONSOLIDATED
   Keep layout/behavior, remove duplicates, scope overrides
   ========================================================= */

/* ====== QUICK CONFIG ====== */
:root {
  --player-w: 455px;
  --player-h: 520px;
  --player-right: 2rem;
  --stack-gap: 0rem;
  --wrapper-left: 2rem;
  --gap: 1.2rem;
}

/* Prevent horizontal overflow with 100vw on Chrome */
html, body { overflow-x: clip; }

/* ====== BACKGROUND ====== */
body {
  background: url("../images/bground/background.jpg") no-repeat center/cover fixed;
}

/* ====== LAYOUT ====== */
.page-content { display: flex; justify-content: flex-start; }

/* Blog overlay/card */
.page-content .wrapper {
  width: calc(100vw - var(--player-w) - var(--player-right) - var(--wrapper-left));
  max-width: none !important;
  margin: 2rem var(--gap) 2rem var(--wrapper-left);
  background: rgba(0,0,0,0.98);
  padding: 2.5rem;
  border-radius: 1.2rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.8);
  overflow: hidden;
  box-sizing: border-box;
  font-size: 1.08rem;
  line-height: 1.7;
}

/* Normalize nested wrappers inside the overlay */
.page-content .wrapper .wrapper,
.page-content .wrapper .site-header .wrapper,
.page-content .wrapper .site-footer .wrapper,
.page-content .wrapper .page-header .wrapper,
.page-content .wrapper .dash-header .wrapper {
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box;
}

/* Transparent header/footer bars when placed inside overlay */
.page-content .wrapper .site-header,
.page-content .wrapper .page-header,
.page-content .wrapper .dash-header,
.page-content .wrapper .site-footer {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* ====== TYPOGRAPHY ====== */
.page-content .wrapper h1 { font-size: 2.2rem; }
.page-content .wrapper h2 { font-size: 1.6rem; letter-spacing: 0.2px; margin-bottom: 1rem; }
.page-content .wrapper h3 { font-size: 1.25rem; }

.page-content .wrapper .tag,
.page-content .wrapper .post-tag,
.page-content .wrapper .label {
  font-size: 0.92rem;
  padding: 0.25rem 0.6rem;
  border-radius: 0.6rem;
}

.page-content .wrapper .post-meta,
.page-content .wrapper .post__meta {
  font-size: 0.95rem;
}

/* ====== HEADER AVATAR & INTRO ====== */
.page-content .wrapper header img,
.page-content .wrapper .site-header img,
.page-content .wrapper .dash-header img {
  width: 72px; height: 72px; object-fit: cover; border-radius: 12px; margin-right: 12px;
}
.page-content .wrapper header p,
.page-content .wrapper .site-header p,
.page-content .wrapper .dash-header p {
  font-size: 1.02em;
}

/* ====== SPOTIFY CARD ====== */
#spotify-player-wrapper {
  position: fixed;
  bottom: 2rem;
  right: var(--player-right);
  width: var(--player-w);
  height: var(--player-h);
  background: rgba(0,0,0,0.7);
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  border-bottom-left-radius: 1rem;
  border-bottom-right-radius: 1rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.6);
  overflow: hidden;
  z-index: 1000;
}
#spotify-player-wrapper iframe { width: 100%; height: 100%; border: none; }

/* ====== SCHEDULE BAR (STACKED ABOVE SPOTIFY) ====== */
#schedule-bar {
  position: fixed !important;
  right: var(--player-right);
  bottom: calc(2rem + var(--player-h) + var(--stack-gap));
  width: var(--player-w);
  height: 230px;
  background: rgba(0,0,0,0.85);
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  box-shadow: 0 6px 16px rgba(0,0,0,0.6);
  overflow: hidden;
  z-index: 1000;
}
#schedule-bar iframe { width: 100%; height: 100%; border: 0; }

/* ====== MOBILE ====== */
@media (max-width: 600px) {
  #spotify-player-wrapper, #schedule-bar { display: none; }
  .page-content .wrapper { width: 100%; margin: 1rem; max-width: none; }
}

/* ====== SWUP FADE ====== */
.transition-fade { transition: opacity .2s ease; }
html.is-changing .transition-fade { opacity: 0; }

/* ====== WARNING MODAL (SOFT/HARD) ====== */
#warning-modal {
  position: fixed; inset: 0;
  display: none;
  align-items: center; justify-content: center;
  background: rgba(0,0,0,0.66);
  z-index: 1300;
  backdrop-filter: blur(2px);
}
#warning-modal img { display: block; max-width: none; max-height: none; }

#warning-modal.soft {
  background: rgba(0,0,0,0.66);
  padding-inline: 3vw;
  padding-top: max(1.5vh, env(safe-area-inset-top));
  padding-bottom: max(1.5vh, env(safe-area-inset-bottom));
}
#warning-modal.soft img {
  height: 94vh; width: auto;
  object-fit: contain;
  border-radius: 18px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}

#warning-modal.hard {
  background: rgba(0,0,0,0.9); padding: 0;
  display: flex; align-items: center; justify-content: center;
}
#warning-modal.hard img {
  width: 96vmin; height: auto;
  max-width: 96vw; max-height: 96vh;
  object-fit: contain; border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}

@media (orientation: portrait) {
  #warning-modal.hard {
    padding: env(safe-area-inset-top) env(safe-area-inset-right)
             env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
  #warning-modal.hard img {
    width: calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right));
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
}
@media (max-height: 520px) { #warning-modal.soft img { height: 88vh; } }

body.warn-lock {
  overflow: hidden !important;
  cursor: not-allowed !important;
  user-select: none !important;
}

/* ====== SEARCH BOX ====== */
.recent-articles .recent-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-right: 2rem;
}
.recent-articles .recent-header h2 {
  margin: 0;
  font-size: 2rem;
  color: #4e8cff;
}

#article-search {
  width: clamp(350px, 60%, 800px);
  padding: 0.6rem 1rem;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 0.5rem;
  background-color: #f5f5f5;
  color: #4e8cff;
  transition: border-color .2s, box-shadow .2s;
}
#article-search::placeholder { color: #a0a0a0; }
#article-search:focus {
  outline: none;
  border-color: #4e8cff;
  box-shadow: 0 0 0 3px rgba(78, 140, 255, 0.3);
}

.article-item.hidden {
  opacity: 0; height: 0; margin: 0; padding: 0; overflow: hidden;
  transition: opacity .3s, height .3s;
}

/* ====== WELCOME MODAL (no flicker) ====== */
#welcome-overlay, #welcome-modal {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s cubic-bezier(.4,0,.2,1);
  display: none;
}
#welcome-overlay.active {
  opacity: 1;
  pointer-events: auto;
  display: block;
}
#welcome-modal.active {
  opacity: 1;
  pointer-events: auto;
  display: flex;
}
#welcome-modal {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  width: 90vw; max-width: 600px; padding: 3rem;
  background: rgba(0,0,0,.95);
  border-radius: 1rem;
  box-shadow: 0 8px 30px rgba(0,0,0,.8);
  z-index: 2000;
  flex-direction: column; align-items: center; gap: 1.5rem;
}
#welcome-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.6); z-index: 1999;
}

/* Welcome content */
.modal-open { overflow: hidden }
.welcome-card { display: flex; flex-direction: column; align-items: center; text-align: center; position: relative }
.welcome-avatar { width: 160px; height: 160px; border-radius: 50%; object-fit: cover }
.welcome-card h1 { font-size: 3rem; margin: 0 }
.welcome-card p { font-size: 1.3rem; margin: .5rem 0; line-height: 1.4; }

.welcome-links {
  display: grid; grid-template-columns: repeat(3,1fr);
  gap: .75rem 1.5rem; list-style: none; padding: 0; margin: 1.5rem 0 0;
}
.welcome-links a {
  display: inline-flex; align-items: center; gap: .5rem;
  font-size: 1.2rem;
  color: #4e8cff !important;
  fill: currentColor;
  text-decoration: none;
  transition: color 0.15s;
}
.welcome-links a:hover {
  color: #75aaff !important;
  fill: #75aaff;
  text-decoration: underline
}
.svg-icon {
  display: inline-flex;
  vertical-align: middle;
  margin-right: 0.4em;
  width: 1.2em;
  height: 1.2em;
}
.svg-icon svg { width: 1.2em; height: 1.2em; display: block; }
.threads-icon svg, .tiktok-icon svg { filter: drop-shadow(0 0 2px #fff); }

/* Close button */
#welcome-close {
  position: absolute; top: .5rem; right: .75rem;
  background: none; border: none; font-size: 2.4rem; color: #ccc; cursor: pointer
}
#welcome-close:hover { color: #fff }

/* About pill */
.about-btn {
  font-family: inherit;
  font-size: 1rem;
  font-weight: 500;
  color: inherit;
  background: rgba(255,255,255,0.17);
  border: none;
  border-radius: 0.7rem;
  padding: 0.28em 1.1em;
  margin-left: 1rem;
  cursor: pointer;
  transition: background 0.18s, color 0.18s;
  line-height: 1.13;
  box-shadow: none;
  letter-spacing: 0.01em;
  display: inline-block;
  vertical-align: middle;
}
.about-btn:hover,
.about-btn:focus {
  background: rgba(255,255,255,0.28);
  color: inherit;
  text-decoration: none;
}

/* ====== SOCIAL ICONS ====== */
/* Dark default: white => blue on hover */
:root:not([data-theme="light"]) .social_links a,
:root:not([data-theme="light"]) header .social_links a,
:root:not([data-theme="light"]) .dash-header .social_links a {
  color: #fff !important;
  background: none !important;
  transition: color 0.17s;
}
:root:not([data-theme="light"]) .social_links a:hover,
:root:not([data-theme="light"]) header .social_links a:hover,
:root:not([data-theme="light"]) .dash-header .social_links a:hover {
  color: #4e8cff !important;
}

/* ====== LIGHT THEME — TOKENS ====== */
:root[data-theme="light"] {
  --text-main:   #222;
  --text-dim:    #5b5b5b;
  --overlay-bg:  rgba(255,255,255,0.92);

  /* Titles */
  --title-pink:   #ff4da6;
  --title-pink-h: #cc0077;

  /* Tags (green style) */
  --tag-bg:      #e8f5ee;
  --tag-text:    #2a915a;
  --tag-border:  #c6ead7;

  /* Social */
  --icon:        #111;
  --icon-hover:  #2a66d4;

  /* Search */
  --search-bg:   #f5f7fb;
  --search-bd:   #d9dfeb;
  --search-ph:   #9aa6b2;
}

/* Light: overlay and base text */
:root[data-theme="light"] .page-content .wrapper {
  background: var(--overlay-bg) !important;
  color: var(--text-main) !important;
}
:root[data-theme="light"] .page-content .wrapper p,
:root[data-theme="light"] .page-content .wrapper li {
  color: var(--text-main) !important;
}
:root[data-theme="light"] .page-content .wrapper .post-meta,
:root[data-theme="light"] .page-content .wrapper .post__meta {
  color: var(--text-dim) !important;
}

/* Light: post titles = pink */
:root[data-theme="light"] .page-content .wrapper .post-link,
:root[data-theme="light"] a.post-link,
:root[data-theme="light"] .post-title a,
:root[data-theme="light"] h1.post-title a,
:root[data-theme="light"] .posts .post-title a {
  color: var(--title-pink) !important;
  text-decoration: none !important;
}
:root[data-theme="light"] .page-content .wrapper .post-link:hover,
:root[data-theme="light"] a.post-link:hover,
:root[data-theme="light"] .post-title a:hover,
:root[data-theme="light"] h1.post-title a:hover,
:root[data-theme="light"] .posts .post-title a:hover {
  color: var(--title-pink-h) !important;
  text-decoration: underline !important;
}

/* Light: site title black, chevron blue */
:root[data-theme="light"] .site-title {
  color: #111 !important;
  font-weight: 700;
}
:root[data-theme="light"] .site-title a {
  color: inherit !important;
  text-decoration: none !important;
}
:root[data-theme="light"] .site-title a:hover { opacity: 0.85; }
:root[data-theme="light"] .site-title::after,
:root[data-theme="light"] .site-title > span,
:root[data-theme="light"] .site-title .chevron,
:root[data-theme="light"] .site-title a > span {
  color: #4e8cff !important;
}

/* Light: section headings that were overridden by theme */
:root[data-theme="light"] .recent-articles .recent-header h2 {
  color: #2a66d4 !important;
}

/* Light: Tags (single border) */
:root[data-theme="light"] .page-content .wrapper .tag,
:root[data-theme="light"] .page-content .wrapper .post-tag,
:root[data-theme="light"] .page-content .wrapper .label {
  background: var(--tag-bg) !important;
  color: var(--tag-text) !important;
  border: 1px solid var(--tag-border) !important;
  box-shadow: none !important;
  background-clip: padding-box !important;
}

/* Light: Search box */
:root[data-theme="light"] #article-search {
  background-color: var(--search-bg) !important;
  border: 1px solid var(--search-bd) !important;
  color: var(--text-main) !important;
}
:root[data-theme="light"] #article-search::placeholder {
  color: var(--search-ph) !important;
}

/* Light: header/footer bars inside overlay already transparent via base rule */

/* Light: social icons = black -> blue on hover */
:root[data-theme="light"] .social_links a,
:root[data-theme="light"] header .social_links a,
:root[data-theme="light"] .dash-header .social_links a {
  color: var(--icon) !important;
  background: transparent !important;
}
:root[data-theme="light"] .social_links a:hover,
:root[data-theme="light"] header .social_links a:hover,
:root[data-theme="light"] .dash-header .social_links a:hover {
  color: var(--icon-hover) !important;
}

/* ====== DARK GUARD (overlay color intact) ====== */
:root:not([data-theme="light"]) .page-content .wrapper {
  background: rgba(0,0,0,0.98) !important;
  color: inherit !important;
}

/* Light tweak for About pill for better contrast */
:root[data-theme="light"] .about-btn {
  background: rgba(0,0,0,0.08) !important;
  color: #111 !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
:root[data-theme="light"] .about-btn:hover { background: rgba(0,0,0,0.14) !important; }

/* =========================================================
   FOOTER CREDIT — unified per prompt (scope = .site-footer)
   - Dark: rgba(255,255,255,0.70)
   - Light: rgba(0,0,0,0.70)
   - Links same color as text, keep underline, subtle hover
   ========================================================= */
:root:not([data-theme="light"]) .site-footer,
:root:not([data-theme="light"]) .site-footer a,
:root:not([data-theme="light"]) .site-footer a:visited {
  color: rgba(255,255,255,0.70) !important;
  text-decoration: underline !important;
}

:root[data-theme="light"] .site-footer,
:root[data-theme="light"] .site-footer a,
:root[data-theme="light"] .site-footer a:visited {
  color: rgba(0,0,0,0.70) !important;
  text-decoration: underline !important;
}

/* Hover: brighten slightly, no color switch to avoid flicker */
.site-footer a:hover,
.site-footer a:focus-visible { opacity: .85; }

/* ===== LIGHT MODE: remove header/footer pill (no blur/shadow/radius) ===== */
:root[data-theme="light"] .site-header,
:root[data-theme="light"] .site-header .wrapper,
:root[data-theme="light"] .site-footer,
:root[data-theme="light"] .site-footer .wrapper {
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
/* kill any pill pseudo-elements */
:root[data-theme="light"] .site-header::before,
:root[data-theme="light"] .site-header::after,
:root[data-theme="light"] .site-footer::before,
:root[data-theme="light"] .site-footer::after {
  content: none !important;
}

/* ===== FOOTER CREDIT — text & links same color, no underline ===== */
/* Dark: grey-ish like surrounding text */
:root:not([data-theme="light"]) .site-footer,
:root:not([data-theme="light"]) .site-footer a,
:root:not([data-theme="light"]) .site-footer a:visited {
  color: rgba(255,255,255,0.70) !important; /* xám nhạt */
  text-decoration: none !important;         /* bỏ gạch chân */
}

/* Light: dark grey for readability on light overlay */
:root[data-theme="light"] .site-footer,
:root[data-theme="light"] .site-footer a,
:root[data-theme="light"] .site-footer a:visited {
  color: rgba(0,0,0,0.70) !important;       /* xám đậm */
  text-decoration: none !important;         /* bỏ gạch chân */
}

/* Hover subtle: no color switch → tránh nhấp nháy khi toggle theme */
.site-footer a:hover,
.site-footer a:focus-visible { opacity: .85; }

/* Normalize states inside footer */
.site-footer a:active,
.site-footer a:visited { color: inherit !important; }

/* ===== WELCOME MODAL — Light mode fix (white card, dark body text) ===== */
:root[data-theme="light"] #welcome-modal {
  background: rgba(255,255,255,0.98) !important;
  box-shadow: 0 12px 30px rgba(0,0,0,0.18) !important;
}

/* Body text inside modal → dark, but don't touch heading/link colors */
:root[data-theme="light"] #welcome-modal p,
:root[data-theme="light"] #welcome-modal li,
:root[data-theme="light"] #welcome-modal small {
  color: #111 !important;
}

/* Close button readable on white */
:root[data-theme="light"] #welcome-close { color: #666 !important; }
:root[data-theme="light"] #welcome-close:hover { color: #000 !important; }

/* (optional) overlay a bit lighter in light mode — uncomment if bạn muốn */
/*
:root[data-theme="light"] #welcome-overlay {
  background: rgba(0,0,0,0.30) !important;
}

/* ===== WELCOME MODAL — XXL (both themes) ===== */
#welcome-modal{
  max-width: min(92vw, 980px) !important;   /* rộng hơn */
  max-height: calc(100vh - 8vh) !important; /* không tràn màn hình */
  overflow: auto !important;
  padding: 4rem 4rem 3.25rem !important;
  border-radius: 1.35rem !important;
}

/* Avatar to bự */
#welcome-modal .welcome-avatar{
  width: 260px !important;
  height: 260px !important;
}

/* Heading to bự nhưng responsive */
#welcome-modal .welcome-card h1{
  font-size: clamp(3.4rem, 2.6rem + 2.2vw, 5rem) !important;
  line-height: 1.04 !important;
  margin-top: .35rem !important;
}

/* Body text lớn hơn chút */
#welcome-modal .welcome-card p{
  font-size: clamp(1.15rem, 1.05rem + .35vw, 1.45rem) !important;
}

/* Link size & spacing */
#welcome-modal .welcome-links{
  gap: 1rem 2rem !important;
  margin-top: 1.35rem !important;
}
#welcome-modal .welcome-links a{
  font-size: 1.3rem !important;
}

/* Nút đóng tương xứng */
#welcome-close{ font-size: 3rem !important; }

/* Siêu rộng màn hình: bump thêm */
@media (min-width: 1400px){
  #welcome-modal{ max-width: 1100px !important; padding: 4.25rem 4.25rem 3.5rem !important; }
  #welcome-modal .welcome-avatar{ width: 300px !important; height: 300px !important; }
  #welcome-modal .welcome-card h1{ font-size: clamp(3.8rem, 2.2rem + 3vw, 5.4rem) !important; }
}

/* Màn hình nhỏ/chiều cao thấp: giữ dễ nhìn */
@media (max-width: 480px){
  #welcome-modal{ width: 92vw !important; max-width: none !important; padding: 2rem !important; }
  #welcome-modal .welcome-avatar{ width: 150px !important; height: 150px !important; }
  #welcome-modal .welcome-links a{ font-size: 1.12rem !important; }
}
@media (max-height: 600px){
  #welcome-modal{ padding: 2.25rem !important; }
  #welcome-modal .welcome-avatar{ width: 170px !important; height: 170px !important; }
}

/* Light-mode look (giữ như đã fix) */
:root[data-theme="light"] #welcome-modal{
  background: rgba(255,255,255,0.98) !important;
  box-shadow: 0 16px 36px rgba(0,0,0,0.2) !important;
}
:root[data-theme="light"] #welcome-modal p,
:root[data-theme="light"] #welcome-modal li,
:root[data-theme="light"] #welcome-modal small{ color: #111 !important; }
:root[data-theme="light"] #welcome-close{ color: #666 !important; }
:root[data-theme="light"] #welcome-close:hover{ color: #000 !important; }

/* ===== WELCOME MODAL — +1 step bigger (both themes) ===== */
#welcome-modal{
  max-width: min(92vw, 1080px) !important;      /* was 980px */
  max-height: calc(100vh - 8vh) !important;
  overflow: auto !important;
  padding: 4.25rem 4.25rem 3.5rem !important;   /* a bit more padding */
  border-radius: 1.4rem !important;
}

/* Larger avatar */
#welcome-modal .welcome-avatar{
  width: 280px !important;                       /* was 260px */
  height: 280px !important;
}

/* Heading just a touch bigger */
#welcome-modal .welcome-card h1{
  font-size: clamp(3.6rem, 2.4rem + 2.6vw, 5.4rem) !important; /* was max 5.0–5.4 */
  line-height: 1.04 !important;
}

/* Body text slightly larger */
#welcome-modal .welcome-card p{
  font-size: clamp(1.18rem, 1.05rem + .40vw, 1.50rem) !important;
}

/* Links size + spacing */
#welcome-modal .welcome-links{
  gap: 1rem 2rem !important;
  margin-top: 1.35rem !important;
}
#welcome-modal .welcome-links a{
  font-size: 1.34rem !important;                 /* was 1.30rem */
}

/* Close button follows size */
#welcome-close{ font-size: 3.2rem !important; }

/* Ultra-wide screens: one more small bump */
@media (min-width: 1400px){
  #welcome-modal{ max-width: 1200px !important; }
  #welcome-modal .welcome-avatar{ width: 320px !important; height: 320px !important; }
  #welcome-modal .welcome-card h1{ font-size: clamp(3.9rem, 2rem + 3.2vw, 5.8rem) !important; }
}
