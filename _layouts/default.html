<!DOCTYPE html>
<html
  class="{% if site.dash.rtl %}direction--rtl{% else %}direction--ltr{% endif %}"
  lang="{{ page.lang | default: site.lang | default: 'en' }}">

  {%- include head.html -%}

  <body>

    {%- include schedule.html -%}          <!-- thanh lịch: fixed -->
    {%- include spotify-player.html -%}    <!-- spotify: fixed -->

    <!-- CHỈ phần này sẽ thay đổi khi điều hướng (SPA) -->
    <main id="swup" class="page-content transition-fade" aria-label="Content">
      <div class="wrapper">
        {%- include header.html -%}
        {{ content }}
        {%- include footer.html -%}
      </div>
    </main>

    <script>
      window.FontAwesomeConfig = { searchPseudoElements: true };
    </script>

    <!-- Swup (SPA) -->
    <script defer src="https://unpkg.com/swup@4/dist/swup.min.js"></script>
    <script>
      // Chỉ bắt link nội bộ; bỏ qua link có target/_blank, link có data-no-swup, và anchor #
      const swup = new Swup({
        containers: ['#swup'],
        linkSelector: 'a[href^="{{ site.baseurl | default: "/" }}"]:not([data-no-swup]):not([target]):not([href*="#"])'
      });

      // Nếu có script highlight/MathJax… cần re-init, đặt vào đây
      document.addEventListener('swup:contentReplaced', () => {
        // Prism && Prism.highlightAll();
        // MathJax && MathJax.typeset && MathJax.typeset();
      });
    </script>
  </body>
</html>
